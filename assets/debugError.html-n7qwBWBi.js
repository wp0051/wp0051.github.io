import{_ as s,c as a,e,o as t}from"./app-34Y0emjC.js";const p="/images/javaScript/98-1545370533000.png",c="/images/javaScript/98-1545371172000.png",l={};function i(o,n){return t(),a("div",null,[...n[0]||(n[0]=[e('<h1 id="错误处理" tabindex="-1"><a class="header-anchor" href="#错误处理"><span>错误处理</span></a></h1><p>错误，指程序中的非正常运行状态，在其他编程语言中称为‘异常’或，‘错误’。解释器为每个错误情形创建并抛出一个<code>error对象</code>，其中包含错误的描述信息。</p><h2 id="error对象" tabindex="-1"><a class="header-anchor" href="#error对象"><span>Error对象</span></a></h2><blockquote><p>ECMAScript预定义了六种类型的错误。执行代码期间可能会发生的错误类型有多种种类，每种种类都有对应的错误类型。当错误发生时，就会抛出对应类型的错误对象。</p></blockquote><h3 id="预定义错误类型" tabindex="-1"><a class="header-anchor" href="#预定义错误类型"><span>预定义错误类型</span></a></h3><table><thead><tr><th>错误类型</th><th>说明</th></tr></thead><tbody><tr><td>ReferenceError</td><td>表示错误的原因：无效引用，所使用的数据未定义</td></tr><tr><td>RangeError</td><td>表示错误的原因：数值变量或参数超出其有效范围</td></tr><tr><td>TypeError</td><td>表示错误的原因：变量或参数部属于有效类型</td></tr><tr><td>InternalError</td><td>表示javascript引擎内部错误的异常</td></tr><tr><td>EvalError</td><td>表示错误的原因：与eval()有关</td></tr><tr><td>SyntaxError</td><td>表示错误的原因：eval()在解析代码的过程发生的语法错误</td></tr><tr><td>URLError</td><td>表示错误的原因：给encodeURL()或decodeURL()传递的参数无效</td></tr></tbody></table><img src="'+p+`" alt="错误类型"><h3 id="自定义错误类型" tabindex="-1"><a class="header-anchor" href="#自定义错误类型"><span>自定义错误类型</span></a></h3><p>除了浏览器预定义的六种错误类型，开发人员可自定义错误并进行处理(处理方法见下)：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;提示信息&quot;</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><img src="`+c+`" alt="自定义错误"><h2 id="错误处理-1" tabindex="-1"><a class="header-anchor" href="#错误处理-1"><span>错误处理</span></a></h2><blockquote><p>通过使用JavaScript提供的异常处理语句，可以用结构优化的方式捕捉发生的错误，让异常处理代码核心业务代码实现分离。</p></blockquote><p>出错行以下的所有JS代码将中停执行，这是我们不希望看到的，如果我们能获取 这些Error，然后弹出一些友好界面会有更好的体验。 所以说，对于拿不准的代码段、容易报错或产生兼容问题的代码段/语句块加上错误处理。</p><ul><li>解决浏览器兼容性问题</li><li>引用外部函数库，不确定函数库返回的结果正确与否。</li></ul><h3 id="try-catch语句" tabindex="-1"><a class="header-anchor" href="#try-catch语句"><span>try...catch语句</span></a></h3><p>try...catch 语句作为js中处理异常的一种标准方式。try语句标记一块待尝试的语句，如果该语句出现错误，则通过catch语句进行捕捉。</p><ul><li><strong><code>try</code></strong> 语句允许我们定义在执行时进行错误测试的代码块。</li><li><strong><code>catch</code></strong> 语句允许我们定义当 try 代码块发生错误时，所执行的代码块。 <ul><li><code>catch</code>语句中可接收到错误对象，对象上有两个常用属性 <ul><li>name：错误类型</li><li>message：错误信息</li></ul></li></ul></li><li><strong><code>finally</code></strong> 语句指不管try误与异常，都会执行的代码块。 <ul><li>在 finally 中我们可以放置我们必须要执行的代码。</li><li>finally可以省略 JavaScript 语句 <code>try</code> 和 <code>catch</code> 是成对出现的。</li></ul></li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//- 调用未定义的变量，语法报错</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">//用于处理try中出现的错误</span></span>
<span class="line"><span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">//error - 表示try中出现错误的信息对象</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>error<span class="token punctuation">.</span>message<span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">//终结快 - 无论catch语句是否处理了try语句中的错误与异常，都会输出finally语句中的内容</span></span>
<span class="line"><span class="token keyword">finally</span> <span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h4 id="注意事项" tabindex="-1"><a class="header-anchor" href="#注意事项"><span>注意事项</span></a></h4><ol><li><code>try...catch</code>只能捕获在其中执行的同步代码所抛出的异常，异步异常无法捕获</li><li><code>try...catch</code>会降低能，所以只将可能出错的代码片段放入<code>try...catch</code></li></ol><h3 id="throw-抛出语句" tabindex="-1"><a class="header-anchor" href="#throw-抛出语句"><span>throw 抛出语句</span></a></h3><p>与<code>try...catch</code>语句配合使用的还有<code>throw</code>操作符，用于随时抛出定义错误。抛出错误是，必须给throw操作符制定一个值。（值不限类型）</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">function</span> <span class="token function">fn</span><span class="token punctuation">(</span><span class="token parameter">v</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">if</span> <span class="token punctuation">(</span>v<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">return</span> v<span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span><span class="token keyword">else</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">throw</span> <span class="token punctuation">{</span><span class="token literal-property property">name</span> <span class="token operator">:</span> <span class="token string">&#39;错误&#39;</span><span class="token punctuation">}</span><span class="token punctuation">;</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span>
<span class="line"><span class="token keyword">var</span> result<span class="token punctuation">;</span></span>
<span class="line"><span class="token keyword">try</span><span class="token punctuation">{</span></span>
<span class="line">    result<span class="token operator">=</span><span class="token function">fn</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    result <span class="token operator">=</span> <span class="token string">&#39;aa&#39;</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>e<span class="token punctuation">.</span>name<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//错误</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line">console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span>result<span class="token punctuation">)</span><span class="token punctuation">;</span><span class="token comment">//aa</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><code>throw</code>常常会和 <code>Error对象</code>结合使用，用以抛出一个错误：</p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">throw</span> <span class="token keyword">new</span> <span class="token class-name">Error</span><span class="token punctuation">(</span><span class="token string">&quot;参数类型错误&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div><ul><li><a href="https://segmentfault.com/a/1190000016115486" target="_blank" rel="noopener noreferrer">参考文章</a></li></ul><h2 id="错误处理使用场景" tabindex="-1"><a class="header-anchor" href="#错误处理使用场景"><span>错误处理使用场景：</span></a></h2><h3 id="同步场景中的错误" tabindex="-1"><a class="header-anchor" href="#同步场景中的错误"><span>同步场景中的错误</span></a></h3><ul><li>获取DOM元素进行DOM操作，如果未获取到元素需要进行错误判断</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line">document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// do something</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token comment">// 如果未获取到元素则js代码会报错停止执行</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><p><strong>错误处理</strong></p><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    document<span class="token punctuation">.</span><span class="token function">querySelector</span><span class="token punctuation">(</span><span class="token string">&quot;.box&quot;</span><span class="token punctuation">)</span><span class="token punctuation">.</span><span class="token function-variable function">onclick</span> <span class="token operator">=</span> <span class="token keyword">function</span> <span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">        <span class="token comment">// do something</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    console<span class="token punctuation">.</span><span class="token function">log</span><span class="token punctuation">(</span><span class="token string">&quot;未获取到元素&quot;</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>兼容性错误</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">    div<span class="token punctuation">.</span><span class="token function">addEventListener</span><span class="token punctuation">(</span>doSomething<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>error<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    div<span class="token punctuation">.</span><span class="token function">attachEvent</span><span class="token punctuation">(</span>doSomething<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="异步函数中的错误" tabindex="-1"><a class="header-anchor" href="#异步函数中的错误"><span>异步函数中的错误</span></a></h3><ul><li>由于<code>try...catch</code>只能捕获同步代码,所以在异步函数外部使用<code>try...catch</code>是错误的：</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token keyword">try</span> <span class="token punctuation">{</span></span>
<span class="line">	<span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span> <span class="token keyword">catch</span> <span class="token punctuation">(</span>e<span class="token punctuation">)</span> <span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 无法捕获到异步函数的错误</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>所以，回调函数的的错误处理只能在回调函数的内部处理.例如</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token function">ajax</span><span class="token punctuation">(</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">        <span class="token keyword">try</span><span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">        <span class="token punctuation">}</span><span class="token keyword">catch</span><span class="token punctuation">(</span>e<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line"></span>
<span class="line">        <span class="token punctuation">}</span></span>
<span class="line">    <span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">}</span><span class="token punctuation">)</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><ul><li>或者使用<code>Promise</code>语法中的<code>catch</code>来捕获异步函数的错误：</li></ul><div class="language-javascript line-numbers-mode" data-highlighter="prismjs" data-ext="js"><pre><code class="language-javascript"><span class="line"><span class="token function">fetch</span><span class="token punctuation">(</span>url<span class="token punctuation">,</span> options<span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token function">then</span><span class="token punctuation">(</span><span class="token parameter">res</span><span class="token operator">=&gt;</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token keyword">return</span> res<span class="token punctuation">.</span><span class="token function">json</span><span class="token punctuation">(</span><span class="token punctuation">)</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"><span class="token punctuation">.</span><span class="token function">catch</span><span class="token punctuation">(</span>error<span class="token punctuation">)</span><span class="token punctuation">{</span></span>
<span class="line">    <span class="token comment">// 利用Promise语法在catch中捕获错误</span></span>
<span class="line"><span class="token punctuation">}</span></span>
<span class="line"></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h2 id="浏览器断点使用" tabindex="-1"><a class="header-anchor" href="#浏览器断点使用"><span>浏览器断点使用</span></a></h2><p><a href="https://www.cnblogs.com/w10234/p/5441335.html" target="_blank" rel="noopener noreferrer">js断点调试心得</a></p><p><a href="https://blog.csdn.net/arvin0/article/details/53673351" target="_blank" rel="noopener noreferrer">使用VSCode 断点调试 js项目，html页面</a></p>`,45)])])}const u=s(l,[["render",i]]),d=JSON.parse('{"path":"/mds/javaScript/ECMAScript/debugError.html","title":"错误处理","lang":"en-US","frontmatter":{},"git":{},"filePathRelative":"mds/javaScript/ECMAScript/debugError.md"}');export{u as comp,d as data};
